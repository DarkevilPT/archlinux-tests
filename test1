#!/bin/bash

IMG_PATH="test1.png"

# Renderiza a imagem com chafa e guarda em vari√°vel
render_image() {
    chafa --symbols=block,braille,ascii --fill=block --size=80x20 "$IMG_PATH"
}

# Fun√ß√£o para centralizar texto na tela
print_centered() {
    local text="$1"
    local cols=$(tput cols)
    local x=$(( (cols - ${#text}) / 2 ))
    printf "%*s\n" "$x" "$text"
}

draw_menu() {
    clear
    cols=$(tput cols)
    rows=$(tput lines)

    # Renderiza imagem com chafa no topo
    render_image

    echo ""

    # Calcula posi√ß√£o vertical central (ap√≥s imagem)
    # Assume imagem ocupa 20 linhas (ajuste se mudar --size)
    local remaining_lines=$(( rows - 20 ))
    local menu_lines=7  # Quantas linhas tem o menu + espa√ßo
    local top_padding=$(( (remaining_lines - menu_lines) / 2 ))

    for ((i=0; i<top_padding; i++)); do echo ""; done

    print_centered "=========== MENU ==========="
    print_centered "1) In√≠cio"
    print_centered "2) Ver informa√ß√µes"
    print_centered "3) Sair"
    print_centered "============================"
    echo ""
    print_centered "Escolha uma op√ß√£o: "
}

while true; do
    draw_menu
    # Move cursor para leitura centralizada
    read -r -s -n1 choice

    case $choice in
        1)
            clear
            echo -e "\nVoc√™ escolheu: In√≠cio"
            read -n 1 -s -r -p "Pressione qualquer tecla para voltar..."
            ;;
        2)
            clear
            echo -e "\nInforma√ß√µes do sistema:\n"
            uname -a
            echo ""
            read -n 1 -s -r -p "Pressione qualquer tecla para voltar..."
            ;;
        3)
            clear
            print_centered "Saindo... üëã"
            sleep 1
            break
            ;;
        *)
            echo ""
            print_centered "Op√ß√£o inv√°lida. Tente novamente."
            sleep 1
            ;;
    esac
done
